# 要件定義 v3

## システム概要

前日16時以降に入ったオーダーが揃い次第、配達員へ
**時間ブッキングなし・仕事量均等・距離均等**の優先順で自動割り当てするWebシステム。

## ユーザー

| ロール | 説明 |
|--------|------|
| 管理者 / オペレーター | オーダー確認・配車結果の確認・手動調整・PDF出力 |

## データモデル

### オーダー
| フィールド | 内容 |
|-----------|------|
| 配達先住所 | 距離・時間計算に使用 |
| 希望時間帯 | 例：10:00〜12:00（配車の第1制約） |
| 荷物情報 | 任意（メモ程度） |

### 配達員
| フィールド | 内容 |
|-----------|------|
| 名前 | これのみ管理 |

## 自動配車エンジン

**実行タイミング：** 管理者が「自動配車実行」ボタンを押す

### 割り当て優先順位

| 優先度 | 条件 | 内容 |
|--------|------|------|
| 第1 | 配達時間の考慮 | オーダーの希望時間帯に収まること・同一配達員に時間ブッキングが発生しないこと |
| 第2 | 仕事数の平均化 | 配達員ごとのオーダー件数が均等になるよう割り当て |
| 第3 | 距離の平均化 | 配達員ごとの総移動距離が均等になるよう割り当て |

## 業務フロー

```
前日16:00以降
  ↓
オーダー登録（CSV or 手入力）
  ↓
オーダーが揃ったら → 「自動配車実行」ボタンを押す
  ↓
  [自動配車エンジン]
  ① 希望時間帯内に収まるか・ブッキングしないかチェック
  ② 仕事数が均等になるよう割り当て
  ③ 移動距離が均等になるよう調整
  ↓
配車結果を確認・手動微調整
  ↓
配達指示書をPDF出力
```

## 主要画面

| 画面 | 内容 |
|------|------|
| オーダー一覧 | 当日分のオーダー登録・確認・CSV取込 |
| 配達員一覧 | 配達員の名前の登録・管理 |
| 配車結果 | タイムライン表示・手動調整・再実行 |
| PDF出力 | 配達員ごとの配達指示書 |

## MVPで省くもの（将来対応）

- 配達員への自動通知（スマホ・メール）
- スマホアプリ対応
- リアルタイム位置追跡
- 外部ERPとの連携
